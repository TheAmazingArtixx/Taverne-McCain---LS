<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taverne McCain</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap');
        body{font-family:'Poppins',sans-serif}
        .scratch-ticket{position:relative;width:100%;max-width:450px;margin:0 auto;background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);border-radius:20px;overflow:hidden;border:6px solid #0f3460;box-shadow:0 15px 40px rgba(0,0,0,0.5)}
        .winning-numbers{background:linear-gradient(135deg,#0f3460 0%,#16213e 100%);padding:20px;border-radius:15px;margin-bottom:10px;border:3px solid #e94560}
        .scratch-area{position:relative;background:linear-gradient(135deg,#16213e 0%,#0f3460 100%);padding:20px;border-radius:15px;min-height:320px;border:3px solid #e94560}
        .scratch-canvas{position:absolute;top:0;left:0;width:100%;height:100%;cursor:crosshair;border-radius:15px;z-index:10}
        .number-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:10px}
        .number-box{background:linear-gradient(145deg,#2d3748,#1a202c);border:3px solid #4a5568;border-radius:10px;padding:12px 8px;text-align:center;font-weight:900;font-size:22px;color:#e2e8f0;box-shadow:0 4px 6px rgba(0,0,0,0.3)}
        .winning-box{background:linear-gradient(145deg,#2d3748,#1a202c);border:3px solid #e94560;border-radius:10px;padding:12px;text-align:center;font-weight:900;font-size:26px;color:#e94560;box-shadow:0 4px 8px rgba(0,0,0,0.4);animation:pulse 1.5s ease-in-out infinite}
        @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
        .coin{font-size:48px;animation:spin 2s linear infinite}
        @keyframes spin{from{transform:rotateY(0deg)}to{transform:rotateY(360deg)}}
        .jackpot-title{font-size:clamp(20px,5vw,36px);font-weight:900;color:#e94560;text-shadow:2px 2px 4px rgba(0,0,0,0.5);letter-spacing:2px;margin-bottom:15px}
        .prize-amount{font-size:clamp(28px,7vw,56px);font-weight:900;color:#4ade80;text-shadow:2px 2px 0 #166534}
        .ticket-badge{background:#e94560;color:white;font-weight:900;padding:8px 16px;border-radius:20px;font-size:14px;display:inline-block;margin-bottom:10px}
        @media(max-width:640px){.number-box{padding:10px 6px;font-size:18px}.winning-box{padding:10px;font-size:22px}.number-grid{gap:8px}}
    </style>
</head>
<body class="bg-gradient-to-br from-amber-50 to-orange-100">
    <div id="app"></div>
    <script>
        var DISCORD_CLIENT_ID='1441487940776890511',REDIRECT_URI=window.location.origin,WEBHOOK_URL='https://discord.com/api/webhooks/1441176217700139019/kZ73H7dY-5CXVAJtV4M9gpP7PfXBQ6jSl85pd-2RSttc1aoB80N7SLtWwTJuIc2nOrJz';
        var products={bieres:[{id:'b1',name:'Bi√®re Blonde',price:45,emoji:'üç∫'},{id:'b2',name:'Bi√®re Blanche',price:45,emoji:'üç∫'},{id:'b3',name:'Bi√®re Rouge',price:45,emoji:'üç∫'}],vins:[{id:'v1',name:'Vin',price:185,emoji:'üç∑'}],boissons:[{id:'d1',name:'Eau',price:30,emoji:'üíß'},{id:'d2',name:'Soda',price:35,emoji:'ü•§'}],snacks:[{id:'s1',name:'Chips',price:15,emoji:'ü•î'},{id:'s2',name:'Saucisson',price:15,emoji:'üå≠'}]};
        var promoCodes={'HAPPY20':20,'BIENVENUE':10,'MCCAIN15':15};
        var tickets={'T001':{w:0,n:[12,45,78,23,56,89,34,67,90,11,44,77,22,55,88,33,66,99,14,48]},'T002':{w:10,n:[23,23,67,45,89,12,34,23,90,11,56,78,44,67,99,33,56,88,25,47]},'T003':{w:0,n:[34,56,89,12,45,78,90,23,67,44,11,99,55,22,88,77,33,66,15,49]},'T004':{w:50,n:[45,67,45,23,56,89,12,45,78,90,34,11,67,44,99,55,22,88,77,33]},'T005':{w:0,n:[56,78,90,34,67,89,23,45,12,55,44,88,77,11,99,22,66,33,16,40]},'T006':{w:100,n:[67,89,67,45,78,90,34,67,23,56,12,11,99,88,67,44,77,55,22,66]},'T007':{w:0,n:[78,90,12,56,89,23,45,67,34,66,55,77,99,44,88,11,22,33,17,41]},'T008':{w:10,n:[89,12,89,67,90,34,56,89,45,78,23,44,11,77,89,55,99,66,88,22]},'T009':{w:0,n:[90,23,45,78,12,56,67,89,34,77,66,99,88,55,11,44,22,33,18,42]},'T010':{w:500,n:[12,34,12,89,23,45,78,12,67,90,56,55,44,99,12,66,88,77,11,22]},'T011':{w:0,n:[23,45,67,90,34,78,89,12,56,88,77,11,99,66,44,55,33,22,19,43]},'T012':{w:10,n:[34,56,34,12,45,67,90,34,78,23,89,66,55,11,34,77,99,88,44,22]},'T013':{w:0,n:[45,67,89,23,56,90,12,34,78,99,88,44,11,77,55,66,22,33,20,44]},'T014':{w:50,n:[56,78,56,34,67,12,23,56,90,45,89,77,66,44,56,88,11,99,55,22]},'T015':{w:0,n:[67,89,12,45,78,23,34,56,90,11,99,55,44,88,66,77,33,22,21,45]},'T016':{w:10,n:[78,90,78,56,89,34,45,78,12,67,23,88,77,55,78,99,44,11,66,22]},'T017':{w:0,n:[89,12,34,67,90,45,56,78,23,44,11,66,55,99,77,88,22,33,22,46]},'T018':{w:100,n:[90,23,90,78,12,56,67,90,34,89,45,99,88,66,90,11,55,44,77,22]},'T019':{w:0,n:[12,34,56,89,23,67,78,90,45,55,44,77,66,11,88,99,33,22,23,47]},'T020':{w:10,n:[23,45,23,90,34,78,89,23,56,12,67,66,55,77,23,44,99,88,11,22]},'T021':{w:0,n:[34,56,78,12,45,89,90,23,67,77,66,88,55,44,99,11,22,33,24,48]},'T022':{w:50,n:[45,67,45,23,56,90,12,45,78,34,89,88,77,99,45,55,11,66,44,22]},'T023':{w:0,n:[56,78,90,34,67,12,23,45,89,99,88,11,66,55,77,44,33,22,25,49]},'T024':{w:10,n:[67,89,67,45,78,23,34,67,90,56,12,11,99,88,67,66,44,77,55,22]},'T025':{w:0,n:[78,90,12,56,89,34,45,67,23,88,77,44,55,99,66,11,22,33,26,40]},'T026':{w:100,n:[89,12,89,67,90,45,56,89,34,78,23,77,66,11,89,99,55,88,44,22]},'T027':{w:0,n:[90,23,45,78,12,56,67,89,34,99,88,55,44,77,66,11,33,22,27,41]},'T028':{w:10,n:[12,34,12,89,23,67,78,12,45,90,56,88,77,66,12,11,99,55,44,22]},'T029':{w:0,n:[23,45,67,90,34,78,89,12,56,11,99,66,55,88,77,44,22,33,28,42]},'T030':{w:500,n:[34,56,34,12,45,89,90,34,67,23,78,99,88,77,34,66,11,55,44,22]},'T031':{w:0,n:[45,67,89,23,56,90,12,34,78,44,11,77,66,99,88,55,33,22,29,43]},'T032':{w:10,n:[56,78,56,34,67,12,23,56,90,45,89,55,44,88,56,77,99,66,11,22]},'T033':{w:0,n:[67,89,12,45,78,23,34,56,90,66,55,99,77,11,88,44,22,33,30,44]},'T034':{w:50,n:[78,90,78,56,89,34,45,78,12,67,23,77,66,11,78,88,55,99,44,22]},'T035':{w:0,n:[89,12,34,67,90,45,56,78,23,88,77,44,55,11,99,66,33,22,31,45]},'T036':{w:10,n:[90,23,90,78,12,56,67,90,34,89,45,99,88,55,90,44,77,66,11,22]},'T037':{w:0,n:[12,34,56,89,23,67,78,90,45,11,44,66,55,77,99,88,22,33,32,46]},'T038':{w:100,n:[23,45,23,90,34,78,89,23,56,12,67,44,55,77,23,66,99,88,11,22]},'T039':{w:0,n:[34,56,78,12,45,89,90,23,67,55,66,88,77,44,11,99,33,22,33,47]},'T040':{w:10,n:[45,67,45,23,56,90,12,45,78,34,89,66,77,99,45,55,88,11,44,22]},'T041':{w:0,n:[56,78,90,34,67,12,23,45,89,77,88,11,66,55,44,99,22,33,34,48]},'T042':{w:50,n:[67,89,67,45,78,23,34,67,90,56,12,88,99,11,67,77,55,66,44,22]},'T043':{w:0,n:[78,90,12,56,89,34,45,67,23,99,11,44,55,77,66,88,33,22,35,49]},'T044':{w:10,n:[89,12,89,67,90,45,56,89,34,78,23,11,44,77,89,88,99,66,55,22]},'T045':{w:0,n:[90,23,45,78,12,56,67,89,34,44,55,66,77,88,99,11,22,33,36,40]},'T046':{w:100,n:[12,34,12,89,23,67,78,12,45,90,56,55,66,88,12,99,77,11,44,22]},'T047':{w:0,n:[23,45,67,90,34,78,89,12,56,66,77,99,88,11,55,44,33,22,37,41]},'T048':{w:10,n:[34,56,34,12,45,89,90,34,67,23,78,77,88,11,34,99,66,55,44,22]},'T049':{w:0,n:[45,67,89,23,56,90,12,34,78,88,99,55,66,44,77,11,22,33,38,42]},'T050':{w:500,n:[56,78,56,34,67,12,23,56,90,45,89,99,11,44,56,88,77,66,55,22]},'T051':{w:0,n:[67,89,12,45,78,23,34,56,90,11,44,66,55,88,99,77,33,22,39,43]},'T052':{w:10,n:[78,90,78,56,89,34,45,78,12,67,23,44,55,99,78,11,88,77,66,22]},'T053':{w:0,n:[89,12,34,67,90,45,56,78,23,55,66,77,88,44,11,99,22,33,40,44]},'T054':{w:50,n:[90,23,90,78,12,56,67,90,34,89,45,66,77,11,90,44,99,88,55,22]},'T055':{w:0,n:[12,34,56,89,23,67,78,90,45,77,88,99,11,55,66,44,33,22,41,45]},'T056':{w:10,n:[23,45,23,90,34,78,89,23,56,12,67,88,99,44,23,55,11,77,66,22]},'T057':{w:0,n:[34,56,78,12,45,89,90,23,67,99,11,55,44,66,77,88,22,33,42,46]},'T058':{w:100,n:[45,67,45,23,56,90,12,45,78,34,89,11,44,55,45,66,99,88,77,22]},'T059':{w:0,n:[56,78,90,34,67,12,23,45,89,44,55,66,77,99,88,11,33,22,43,47]},'T060':{w:10,n:[67,89,67,45,78,23,34,67,90,56,12,55,66,88,67,77,11,99,44,22]},'T061':{w:0,n:[78,90,12,56,89,34,45,67,23,66,77,99,88,11,55,44,22,33,44,48]},'T062':{w:50,n:[89,12,89,67,90,45,56,89,34,78,23,77,88,55,89,99,44,11,66,22]},'T063':{w:0,n:[90,23,45,78,12,56,67,89,34,88,99,11,55,44,66,77,33,22,45,49]},'T064':{w:10,n:[12,34,12,89,23,67,78,12,45,90,56,99,11,66,12,88,55,77,44,22]},'T065':{w:0,n:[23,45,67,90,34,78,89,12,56,11,44,77,66,55,99,88,22,33,46,40]},'T066':{w:100,n:[34,56,34,12,45,89,90,34,67,23,78,44,55,77,34,99,66,88,11,22]},'T067':{w:0,n:[45,67,89,23,56,90,12,34,78,55,66,88,77,99,11,44,33,22,47,41]},'T068':{w:10,n:[56,78,56,34,67,12,23,56,90,45,89,66,77,99,56,11,88,55,44,22]},'T069':{w:0,n:[67,89,12,45,78,23,34,56,90,77,88,11,66,44,55,99,22,33,48,42]},'T070':{w:500,n:[78,90,78,56,89,34,45,78,12,67,23,88,99,44,78,55,11,66,77,22]},'T071':{w:0,n:[89,12,34,67,90,45,56,78,23,99,11,55,44,66,77,88,33,22,49,43]},'T072':{w:10,n:[90,23,90,78,12,56,67,90,34,89,45,11,44,66,90,77,99,88,55,22]},'T073':{w:0,n:[12,34,56,89,23,67,78,90,45,44,55,77,66,88,99,11,22,33,50,44]},'T074':{w:50,n:[23,45,23,90,34,78,89,23,56,12,67,55,66,88,23,77,11,99,44,22]},'T075':{w:0,n:[34,56,78,12,45,89,90,23,67,66,77,99,88,55,11,44,33,22,51,45]},'T076':{w:10,n:[45,67,45,23,56,90,12,45,78,34,89,77,88,11,45,66,99,55,44,22]},'T077':{w:0,n:[56,78,90,34,67,12,23,45,89,88,99,44,55,77,66,11,22,33,52,46]},'T078':{w:100,n:[67,89,67,45,78,23,34,67,90,56,12,99,11,55,67,88,77,66,44,22]},'T079':{w:0,n:[78,90,12,56,89,34,45,67,23,11,44,66,55,88,77,99,33,22,53,47]},'T080':{w:10,n:[89,12,89,67,90,45,56,89,34,78,23,44,55,77,89,99,66,88,11,22]},'T081':{w:0,n:[90,23,45,78,12,56,67,89,34,55,66,88,77,99,11,44,22,33,54,48]},'T082':{w:50,n:[12,34,12,89,23,67,78,12,45,90,56,66,77,99,12,11,88,55,44,22]},'T083':{w:0,n:[23,45,67,90,34,78,89,12,56,77,88,11,66,55,44,99,33,22,55,49]},'T084':{w:10,n:[34,56,34,12,45,89,90,34,67,23,78,88,99,44,34,55,11,77,66,22]},'T085':{w:0,n:[45,67,89,23,56,90,12,34,78,99,11,55,44,66,77,88,22,33,56,40]},'T086':{w:100,n:[56,78,56,34,67,12,23,56,90,45,89,11,44,66,56,77,99,88,55,22]},'T087':{w:0,n:[67,89,12,45,78,23,34,56,90,44,55,77,66,99,88,11,33,22,57,41]},'T088':{w:10,n:[78,90,78,56,89,34,45,78,12,67,23,55,66,88,78,99,77,11,44,22]},'T089':{w:0,n:[89,12,34,67,90,45,56,78,23,66,77,99,88,11,55,44,22,33,58,42]},'T090':{w:500,n:[90,23,90,78,12,56,67,90,34,89,45,77,88,11,90,44,99,66,55,22]},'T091':{w:0,n:[12,34,56,89,23,67,78,90,45,88,99,55,66,77,11,44,33,22,59,43]},'T092':{w:10,n:[23,45,23,90,34,78,89,23,56,12,67,99,11,77,23,66,88,55,44,22]},'T093':{w:0,n:[34,56,78,12,45,89,90,23,67,11,44,66,55,88,77,99,22,33,60,44]},'T094':{w:50,n:[45,67,45,23,56,90,12,45,78,34,89,44,55,88,45,77,99,66,11,22]},'T095':{w:0,n:[56,78,90,34,67,12,23,45,89,55,66,77,88,99,11,44,33,22,61,45]},'T096':{w:10,n:[67,89,67,45,78,23,34,67,90,56,12,66,77,99,67,88,11,55,44,22]},'T097':{w:0,n:[78,90,12,56,89,34,45,67,23,77,88,11,66,55,44,99,22,33,62,46]},'T098':{w:100,n:[89,12,89,67,90,45,56,89,34,78,23,88,99,55,89,77,66,11,44,22]},'T099':{w:0,n:[90,23,45,78,12,56,67,89,34,99,11,44,55,66,77,88,33,22,63,47]},'T100':{w:10,n:[12,34,12,89,23,67,78,12,45,90,56,11,44,66,12,99,77,88,55,22]}};
        var state={user:null,cart:[],page:'home',promo:'',comment:'',orderHist:[],scratchHist:[],code:'',scratching:false,win:0,winNums:[],yourNums:[],used:[]};
        var canvas,ctx,down=false,pct=0;
        function getUser(){var f=new URLSearchParams(window.location.hash.slice(1)),t=f.get('access_token');if(t)fetch('https://discord.com/api/users/@me',{headers:{authorization:'Bearer '+t}}).then(function(r){return r.json()}).then(function(u){state.user=u;state.page='welcome';window.location.hash='';render()}).catch(console.error)}
        function login(){window.location.href='https://discord.com/api/oauth2/authorize?client_id='+DISCORD_CLIENT_ID+'&redirect_uri='+encodeURIComponent(REDIRECT_URI)+'&response_type=token&scope=identify'}
        function logout(){state={user:null,cart:[],page:'home',promo:'',comment:'',orderHist:[],scratchHist:[],code:'',scratching:false,win:0,winNums:[],yourNums:[],used:[]};render()}
        function addCart(p){var e=state.cart.find(function(i){return i.id===p.id});if(e)e.quantity++;else state.cart.push(Object.assign({},p,{quantity:1}));render()}
        function updateQty(id,q){if(q<=0)state.cart=state.cart.filter(function(i){return i.id!==id});else{var i=state.cart.find(function(i){return i.id===id});if(i)i.quantity=q}render()}
        function calcSub(){return state.cart.reduce(function(s,i){return s+(i.price*i.quantity)},0)}
        function calcDisc(){return calcSub()*(promoCodes[state.promo]||0)/100}
        function calcTotal(){return calcSub()-calcDisc()}
        function order(){if(!state.cart.length){alert('Panier vide!');return}var items=state.cart.map(function(i){return i.emoji+' '+i.name+' x'+i.quantity}).join('\n');if(!confirm('Confirmer?\n\nTotal: '+calcTotal().toFixed(2)+'‚Ç¨\n\n'+items))return;var o={user:state.user.username,userId:state.user.id,items:state.cart,sub:calcSub().toFixed(2),disc:calcDisc().toFixed(2),total:calcTotal().toFixed(2),promo:state.promo||'Aucun',comment:state.comment||'Aucun',date:new Date().toLocaleString('fr-FR')},txt=o.items.map(function(i){return i.emoji+' **'+i.name+'** x'+i.quantity+' - '+(i.price*i.quantity).toFixed(2)+'‚Ç¨'}).join('\n'),e={embeds:[{title:'üç∫ Commande',color:0xFFA500,fields:[{name:'üë§',value:o.user,inline:true},{name:'üìÖ',value:o.date,inline:true},{name:'üçª',value:txt},{name:'üí∞',value:'Total: **'+o.total+'‚Ç¨**'}],timestamp:new Date().toISOString()}]};if(state.comment!=='Aucun')e.embeds[0].fields.push({name:'üí¨',value:state.comment});fetch(WEBHOOK_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(e)}).then(function(r){if(r.ok){state.orderHist.unshift(o);alert('‚úÖ Commande envoy√©e!');state.cart=[];state.promo='';state.comment='';state.page='orderHist';render()}else alert('‚ùå Erreur')}).catch(function(){alert('‚ùå Erreur')})}
        function startScratch(){var c=state.code.toUpperCase().trim();if(!c){alert('Entrez un code!');return}if(!tickets[c]){alert('‚ùå Code invalide!');return}if(state.used.indexOf(c)!==-1){alert('‚ùå Code utilis√©!');return}state.used.push(c);var t=tickets[c],w=[];for(var i=0;i<6;i++)w.push(t.n[Math.floor(Math.random()*20)]);state.winNums=w;state.yourNums=t.n;state.win=t.w;state.scratching=true;render();setTimeout(function(){initCanvas()},100)}
        function initCanvas(){canvas=document.getElementById('canvas');if(!canvas)return;ctx=canvas.getContext('2d');canvas.width=canvas.parentElement.offsetWidth;canvas.height=canvas.parentElement.offsetHeight;var g=ctx.createLinearGradient(0,0,canvas.width,canvas.height);g.addColorStop(0,'#4a5568');g.addColorStop(1,'#2d3748');ctx.fillStyle=g;ctx.fillRect(0,0,canvas.width,canvas.height);ctx.font='bold 28px Poppins';ctx.fillStyle='#e2e8f0';ctx.textAlign='center';ctx.fillText('GRATTEZ POUR R√âV√âLER',canvas.width/2,canvas.height/2-20);ctx.font='40px Arial';ctx.fillText('üé´',canvas.width/2,canvas.height/2+40);canvas.addEventListener('mousedown',function(){down=true});canvas.addEventListener('mouseup',function(){down=false});canvas.addEventListener('mousemove',scratch);canvas.addEventListener('touchstart',function(e){e.preventDefault();down=true});canvas.addEventListener('touchend',function(){down=false});canvas.addEventListener('touchmove',function(e){e.preventDefault();scratch(e.touches[0])})}
        function scratch(e){if(!down)return;var r=canvas.getBoundingClientRect(),x=(e.clientX||e.pageX)-r.left,y=(e.clientY||e.pageY)-r.top;ctx.globalCompositeOperation='destination-out';ctx.beginPath();ctx.arc(x,y,40,0,Math.PI*2);ctx.fill();check()}
        function check(){var d=ctx.getImageData(0,0,canvas.width,canvas.height).data,t=0;for(var i=3;i<d.length;i+=4)if(d[i]===0)t++;pct=(t/(d.length/4))*100;if(pct>70)reveal()}
        function reveal(){down=false;var s={user:state.user.username,userId:state.user.id,code:state.code,win:state.win,date:new Date().toLocaleString('fr-FR')};state.scratchHist.unshift(s);var e={embeds:[{title:'üé∞ Ticket - Taverne McCain',color:state.win>0?0x00FF00:0xFF0000,fields:[{name:'üë§',value:s.user,inline:true},{name:'üéüÔ∏è',value:s.code,inline:true},{name:state.win>0?'üéâ GAGN√â!':'üò¢ Perdu',value:state.win>0?'**'+state.win+'‚Ç¨**':'Pas de gain'},{name:'üìÖ',value:s.date}],timestamp:new Date().toISOString()}]};fetch(WEBHOOK_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(e)});setTimeout(function(){alert(state.win>0?'üéâ Gagn√© '+state.win+'‚Ç¨!':'üò¢ Pas de gain...');state.scratching=false;state.code='';state.win=0;state.winNums=[];state.yourNums=[];pct=0;render()},500)}
        function render(){var app=document.getElementById('app'),nav=state.user?'<nav class="bg-orange-800 text-white shadow-lg"><div class="container mx-auto px-4 py-4"><div class="flex items-center justify-between flex-wrap gap-4"><h1 class="text-xl md:text-2xl font-bold">üç∫ Taverne McCain</h1><div class="flex flex-wrap items-center gap-3 text-xs md:text-base"><button onclick="state.page=\'welcome\';render()" class="hover:text-orange-200 '+(state.page==='welcome'?'text-orange-200':'')+'">üè†</button><button onclick="state.page=\'shop\';render()" class="hover:text-orange-200 '+(state.page==='shop'?'text-orange-200':'')+'">üõí</button><button onclick="state.page=\'scratch\';render()" class="hover:text-orange-200 '+(state.page==='scratch'?'text-orange-200':'')+'">üé∞</button><button onclick="state.page=\'profile\';render()" class="hover:text-orange-200 '+(state.page==='profile'?'text-orange-200':'')+'">üë§</button><button onclick="logout()" class="hover:text-red-200">üö™</button></div></div></div></nav>':'';if(!state.user){app.innerHTML='<div><nav class="bg-orange-800 text-white shadow-lg py-4"><div class="container mx-auto px-4"><h1 class="text-2xl md:text-3xl font-bold text-center">üç∫ Taverne McCain</h1></div></nav><div class="container mx-auto px-4 py-8 md:py-12"><div class="max-w-6xl mx-auto"><section class="bg-white rounded-2xl shadow-2xl p-6 md:p-8 mb-8"><div class="text-center mb-8 md:mb-12"><h2 class="text-3xl md:text-5xl font-bold text-orange-800 mb-4">Bienvenue √† la Taverne McCain</h2><p class="text-lg md:text-xl text-gray-600">Bar en ligne avec jeux</p></div><div class="grid md:grid-cols-3 gap-6 md:gap-8 mb-8 md:mb-12"><div class="text-center p-4 md:p-6 bg-orange-50 rounded-xl"><div class="text-4xl md:text-5xl mb-4">üç∫</div><h3 class="text-xl md:text-2xl font-bold text-orange-800 mb-2">Bar</h3><p class="text-sm md:text-base text-gray-600">Bi√®res, cocktails</p></div><div class="text-center p-4 md:p-6 bg-orange-50 rounded-xl"><div class="text-4xl md:text-5xl mb-4">üé∞</div><h3 class="text-xl md:text-2xl font-bold text-orange-800 mb-2">Tickets</h3><p class="text-sm md:text-base text-gray-600">Jusqu\'√† 500‚Ç¨</p></div><div class="text-center p-4 md:p-6 bg-orange-50 rounded-xl"><div class="text-4xl md:text-5xl mb-4">üöÄ</div><h3 class="text-xl md:text-2xl font-bold text-orange-800 mb-2">Livraison</h3><p class="text-sm md:text-base text-gray-600">En ligne</p></div></div><div class="text-center"><button onclick="login()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 md:py-4 px-6 md:px-12 rounded-xl inline-flex items-center gap-3 transform hover:scale-105 text-base md:text-xl"><svg class="w-6 h-6 md:w-8 md:h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/></svg>Connexion Discord</button></div></section><section class="bg-white rounded-2xl shadow-2xl p-6 md:p-8 mb-8"><h2 class="text-2xl md:text-3xl font-bold text-orange-800 mb-6 text-center">Tarifs</h2><div class="grid md:grid-cols-2 gap-4 md:gap-6">'+Object.keys(products).map(function(c){return'<div class="bg-orange-50 p-4 md:p-6 rounded-xl"><h3 class="text-lg md:text-xl font-bold text-orange-800 mb-4 capitalize">'+c+'</h3><div class="space-y-2">'+products[c].map(function(p){return'<div class="flex justify-between text-sm md:text-base"><span>'+p.emoji+' '+p.name+'</span><span class="font-bold">'+p.price.toFixed(2)+'‚Ç¨</span></div>'}).join('')+'</div></div>'}).join('')+'</div></section><section class="bg-white rounded-2xl shadow-2xl p-6 md:p-8"><h2 class="text-2xl md:text-3xl font-bold text-orange-800 mb-6 text-center">Partenaires</h2><div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center"><div class="p-4 bg-gray-50 rounded-xl"><div class="text-3xl md:text-4xl mb-2">üè¢</div><p class="font-semibold text-xs md:text-base">Brasserie</p></div><div class="p-4 bg-gray-50 rounded-xl"><div class="text-3xl md:text-4xl mb-2">üç∑</div><p class="font-semibold text-xs md:text-base">Cave</p></div><div class="p-4 bg-gray-50 rounded-xl"><div class="text-3xl md:text-4xl mb-2">üé™</div><p class="font-semibold text-xs md:text-base">Events</p></div><div class="p-4 bg-gray-50 rounded-xl"><div class="text-3xl md:text-4xl mb-2">üéµ</div><p class="font-semibold text-xs md:text-base">DJ</p></div></div></section></div></div></div>';return}if(state.page==='welcome'){app.innerHTML=nav+'<div class="container mx-auto px-4 py-8 md:py-12"><div class="max-w-4xl mx-auto text-center"><div class="bg-white rounded-2xl shadow-2xl p-6 md:p-12"><h1 class="text-3xl md:text-5xl font-bold text-orange-800 mb-4">Bienvenue '+state.user.username+'! üç∫</h1><p class="text-base md:text-xl text-gray-600 mb-8">Que voulez-vous faire?</p><div class="grid md:grid-cols-2 gap-6"><button onclick="state.page=\'shop\';render()" class="bg-orange-600 hover:bg-orange-700 text-white font-bold py-6 md:py-8 px-6 rounded-xl transform hover:scale-105"><div class="text-4xl md:text-5xl mb-4">üõí</div><div class="text-lg md:text-2xl">Commander</div></button><button onclick="state.page=\'scratch\';render()" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-6 md:py-8 px-6 rounded-xl transform hover:scale-105"><div class="text-4xl md:text-5xl mb-4">üé∞</div><div class="text-lg md:text-2xl">Ticket</div></button></div></div></div></div>'}else if(state.page==='scratch'){if(!state.scratching){var hist='';if(state.scratchHist.length){hist='<div class="mt-8 bg-white rounded-xl shadow-lg p-4 md:p-6"><h3 class="text-lg md:text-xl font-bold text-orange-800 mb-4">Historique</h3><div class="space-y-2">'+state.scratchHist.slice(0,5).map(function(e){return'<div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg"><div><p class="font-semibold text-sm md:text-base">'+e.code+'</p><p class="text-xs md:text-sm text-gray-600">'+e.date+'</p></div><p class="'+(e.win>0?'text-green-600':'text-gray-600')+' font-bold text-sm md:text-base">'+(e.win>0?'+'+e.win+'‚Ç¨':'Perdu')+'</p></div>'}).join('')+'</div></div>'}app.innerHTML=nav+'<div class="container mx-auto px-4 py-8"><div class="max-w-2xl mx-auto"><div class="bg-white rounded-2xl shadow-2xl p-4 md:p-8"><h2 class="text-2xl md:text-3xl font-bold text-orange-800 mb-6 text-center">üé∞ Ticket √† Gratter</h2><div class="bg-gradient-to-r from-purple-100 to-pink-100 p-4 md:p-6 rounded-xl mb-6"><p class="text-center text-base md:text-lg mb-4">Entrez votre code</p><input type="text" value="'+state.code+'" oninput="state.code=this.value" placeholder="CODE" class="w-full px-4 py-3 border-2 border-purple-300 rounded-lg mb-4 text-center text-base md:text-lg font-bold uppercase"><button onclick="startScratch()" class="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-3 md:py-4 rounded-lg text-lg md:text-xl">Gratter</button></div><div class="bg-yellow-50 border-2 border-yellow-300 rounded-xl p-4 mb-4"><p class="text-center font-semibold text-yellow-800 mb-2 text-sm md:text-base">üí° Codes: T001 √† T100</p><p class="text-center text-xs md:text-sm text-gray-600">100 tickets disponibles</p></div>'+hist+'</div></div></div>'}else{app.innerHTML=nav+'<div class="container mx-auto px-4 py-8"><div class="max-w-3xl mx-auto"><div class="bg-white rounded-2xl shadow-2xl p-4 md:p-8"><h2 class="text-xl md:text-2xl font-bold text-orange-800 mb-4 text-center">Grattez pour d√©couvrir!</h2><div class="scratch-ticket"><div class="ticket-badge">TICKET McCain</div><div class="jackpot-title text-center">JACKPOT 500‚Ç¨</div><div class="winning-numbers"><p class="text-white text-center font-bold mb-3 text-sm md:text-base">NUM√âROS GAGNANTS</p><div class="grid grid-cols-6 gap-2">'+state.winNums.map(function(n){return'<div class="winning-box">'+n+'</div>'}).join('')+'</div></div><div class="scratch-area"><p class="text-white text-center font-bold mb-3 text-sm md:text-base relative z-0">VOS NUM√âROS</p><div class="number-grid relative z-0">'+state.yourNums.map(function(n){var isWin=state.winNums.indexOf(n)!==-1;return'<div class="number-box '+(isWin?'bg-gradient-to-br from-green-600 to-green-800 border-green-400 text-green-100':'')+'">'+n+'</div>'}).join('')+'</div><canvas id="canvas" class="scratch-canvas"></canvas></div><p class="text-center text-gray-400 font-bold mt-3 text-xs md:text-sm">Gain maximum: 500‚Ç¨</p></div><p class="text-center text-gray-600 mt-6 text-sm md:text-base">Grattez avec votre souris ou doigt</p></div></div></div>'}}else if(state.page==='shop'){var prods='';for(var cat in products){var items='';products[cat].forEach(function(p){items+='<div class="flex items-center justify-between bg-orange-50 p-3 md:p-4 rounded-lg hover:bg-orange-100"><div class="flex items-center gap-2 md:gap-3"><span class="text-2xl md:text-3xl">'+p.emoji+'</span><div><p class="font-semibold text-sm md:text-base">'+p.name+'</p><p class="text-xs md:text-sm text-gray-600">'+p.price.toFixed(2)+'‚Ç¨</p></div></div><button onclick="addCart('+JSON.stringify(p).replace(/"/g,'&quot;')+')" class="bg-orange-600 hover:bg-orange-700 text-white px-3 md:px-4 py-2 rounded-lg text-sm md:text-base">+</button></div>'});prods+='<div class="bg-white rounded-xl shadow-lg p-4 md:p-6"><h2 class="text-xl md:text-2xl font-bold text-orange-800 mb-4 capitalize">'+cat+'</h2><div class="space-y-2">'+items+'</div></div>'}var cart='';if(!state.cart.length){cart='<p class="text-gray-500 text-center py-8">Vide</p>'}else{var items='';state.cart.forEach(function(i){items+='<div class="bg-orange-50 p-3 rounded-lg"><div class="flex justify-between mb-2"><span class="font-semibold text-sm md:text-base">'+i.emoji+' '+i.name+'</span><button onclick="updateQty(\''+i.id+'\',0)" class="text-red-600">‚úï</button></div><div class="flex justify-between"><div class="flex items-center gap-2 bg-white rounded px-2 py-1"><button onclick="updateQty(\''+i.id+'\','+(i.quantity-1)+')" class="text-orange-600">‚àí</button><span class="font-bold w-8 text-center">'+i.quantity+'</span><button onclick="updateQty(\''+i.id+'\','+(i.quantity+1)+')" class="text-orange-600">+</button></div><span class="font-bold text-orange-700">'+(i.price*i.quantity).toFixed(2)+'‚Ç¨</span></div></div>'});var promo='';if(state.promo&&promoCodes[state.promo])promo='<p class="text-green-600 text-sm">‚úì -'+promoCodes[state.promo]+'%</p>';else if(state.promo)promo='<p class="text-red-600 text-sm">‚úó Invalide</p>';var disc='';if(calcDisc()>0)disc='<div class="flex justify-between text-sm text-green-600"><span>R√©duction:</span><span>-'+calcDisc().toFixed(2)+'‚Ç¨</span></div>';cart='<div class="space-y-3 mb-4 max-h-64 overflow-y-auto">'+items+'</div><div class="border-t pt-4 space-y-3"><div class="flex justify-between text-sm"><span>Sous-total:</span><span>'+calcSub().toFixed(2)+'‚Ç¨</span></div><input type="text" value="'+state.promo+'" oninput="state.promo=this.value.toUpperCase();render()" placeholder="Promo" class="w-full px-3 py-2 border rounded-lg text-sm">'+promo+disc+'<div class="flex justify-between text-lg font-bold text-orange-800 border-t pt-2"><span>Total:</span><span>'+calcTotal().toFixed(2)+'‚Ç¨</span></div><textarea oninput="state.comment=this.value" placeholder="Commentaire" class="w-full px-3 py-2 border rounded-lg resize-none text-sm" rows="3">'+state.comment+'</textarea><button onclick="order()" class="w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 rounded-lg">Commander</button></div>'}app.innerHTML=nav+'<div class="container mx-auto px-4 py-8"><div class="grid lg:grid-cols-3 gap-6"><div class="lg:col-span-2 space-y-6">'+prods+'</div><div class="lg:col-span-1"><div class="bg-white rounded-xl shadow-lg p-4 md:p-6 sticky top-6"><h2 class="text-xl md:text-2xl font-bold text-orange-800 mb-4">üõí Panier</h2>'+cart+'</div></div></div></div>'}else if(state.page==='profile'){app.innerHTML=nav+'<div class="container mx-auto px-4 py-8"><div class="max-w-2xl mx-auto bg-white rounded-2xl shadow-2xl p-6 md:p-8"><h2 class="text-2xl md:text-3xl font-bold text-orange-800 mb-6">Profil</h2><div class="space-y-4"><div class="flex items-center gap-4 p-4 bg-orange-50 rounded-lg"><img src="https://cdn.discordapp.com/avatars/'+state.user.id+'/'+state.user.avatar+'.png" class="w-12 h-12 md:w-16 md:h-16 rounded-full"/><div><p class="font-bold text-base md:text-xl">'+state.user.username+'</p><p class="text-sm md:text-base text-gray-600">'+state.user.id+'</p></div></div><div class="p-4 bg-gray-50 rounded-lg"><p class="text-sm text-gray-600">Commandes</p><p class="font-semibold text-lg">'+state.orderHist.length+'</p></div><div class="p-4 bg-gray-50 rounded-lg"><p class="text-sm text-gray-600">Tickets gratt√©s</p><p class="font-semibold text-lg">'+state.scratchHist.length+'</p></div><div class="space-y-2"><button onclick="state.page=\'orderHist\';render()" class="w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 rounded-lg">üì¶ Voir mes commandes</button><button onclick="state.page=\'scratchHist\';render()" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 rounded-lg">üé∞ Voir mes tickets</button></div></div></div></div>'}else if(state.page==='orderHist'){var hist='';if(!state.orderHist.length)hist='<div class="bg-white rounded-xl shadow-lg p-8 text-center"><div class="text-6xl mb-4">üì¶</div><p class="text-gray-500">Aucune commande</p></div>';else hist='<div class="space-y-4">'+state.orderHist.map(function(o,i){var items='';o.items.forEach(function(it){items+='<p class="text-sm text-gray-700">'+it.emoji+' '+it.name+' x'+it.quantity+' - '+(it.price*it.quantity).toFixed(2)+'‚Ç¨</p>'});var comm='';if(o.comment!=='Aucun')comm='<div class="mt-3 p-3 bg-gray-50 rounded-lg"><p class="text-xs text-gray-600">Commentaire:</p><p class="text-sm">'+o.comment+'</p></div>';return'<div class="bg-white rounded-xl shadow-lg p-4 md:p-6"><div class="flex justify-between mb-4"><div><p class="text-base md:text-lg font-bold text-orange-800">Commande #'+(state.orderHist.length-i)+'</p><p class="text-xs md:text-sm text-gray-600">'+o.date+'</p></div><p class="text-xl md:text-2xl font-bold text-orange-700">'+o.total+'‚Ç¨</p></div><div class="border-t pt-4"><p class="font-semibold mb-2 text-sm md:text-base">Articles:</p><div class="space-y-1">'+items+'</div>'+comm+'</div></div>'}).join('')+'</div>';app.innerHTML=nav+'<div class="container mx-auto px-4 py-8"><div class="max-w-4xl mx-auto"><h2 class="text-2xl md:text-3xl font-bold text-orange-800 mb-6">Mes Commandes</h2>'+hist+'</div></div>'}else if(state.page==='scratchHist'){var hist='';if(!state.scratchHist.length)hist='<div class="bg-white rounded-xl shadow-lg p-8 text-center"><div class="text-6xl mb-4">üé∞</div><p class="text-gray-500">Aucun ticket</p></div>';else hist='<div class="space-y-4">'+state.scratchHist.map(function(s,i){return'<div class="bg-white rounded-xl shadow-lg p-4 md:p-6"><div class="flex justify-between items-center"><div><p class="text-base md:text-lg font-bold '+(s.win>0?'text-green-600':'text-gray-600')+'">'+s.code+'</p><p class="text-xs md:text-sm text-gray-600">'+s.date+'</p></div><div class="text-right"><p class="text-xl md:text-2xl font-bold '+(s.win>0?'text-green-600':'text-gray-600')+'">'+(s.win>0?'+'+s.win+'‚Ç¨':'Perdu')+'</p></div></div></div>'}).join('')+'</div>';app.innerHTML=nav+'<div class="container mx-auto px-4 py-8"><div class="max-w-4xl mx-auto"><h2 class="text-2xl md:text-3xl font-bold text-orange-800 mb-6">Mes Tickets</h2>'+hist+'</div></div>'}}
        window.addEventListener('load',function(){getUser();render()})
    </script>
</body>
</html>
