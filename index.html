<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taverne McCain</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap');
        body{font-family:'Poppins',sans-serif}
        .scratch-ticket{position:relative;width:100%;max-width:500px;margin:0 auto;background:linear-gradient(135deg,#00CED1 0%,#20B2AA 50%,#9370DB 100%);border-radius:25px;overflow:hidden;border:10px solid #FFD700;box-shadow:0 20px 50px rgba(0,0,0,0.4)}
        .ticket-header{background:linear-gradient(135deg,#FF1493 0%,#9370DB 100%);padding:20px;position:relative}
        .illiko-badge{background:white;color:#FF1493;font-weight:900;padding:10px 20px;border-radius:30px;font-size:16px;display:inline-block;box-shadow:0 4px 10px rgba(0,0,0,0.3)}
        .nouveau-badge{background:#4169E1;color:white;font-weight:900;padding:5px 15px;border-radius:15px;font-size:12px;position:absolute;top:20px;left:20px}
        .price-badge{background:white;color:#FF1493;font-weight:900;padding:8px 16px;border-radius:50%;font-size:18px;position:absolute;top:20px;right:20px;border:3px solid #FFD700}
        .jackpot-title{font-size:clamp(32px,8vw,56px);font-weight:900;color:#FFA500;text-shadow:4px 4px 0 #FF4500,-2px -2px 0 #FFD700,2px -2px 0 #FFD700,-2px 2px 0 #FFD700;letter-spacing:3px;text-align:center;margin:20px 0;-webkit-text-stroke:2px #4169E1}
        .jackpot-amount{font-size:clamp(40px,10vw,72px);font-weight:900;color:#FFD700;text-shadow:4px 4px 0 #FF4500;text-align:center;-webkit-text-stroke:2px #4169E1;margin-bottom:20px}
        .winning-section{background:linear-gradient(135deg,#9370DB 0%,#8A2BE2 100%);padding:20px;margin:15px;border-radius:20px;border:5px solid #32CD32}
        .scratch-section{background:linear-gradient(135deg,#4169E1 0%,#1E90FF 100%);padding:20px;margin:15px;border-radius:20px;border:5px solid #32CD32;position:relative;min-height:350px}
        .section-title{color:white;font-weight:900;font-size:18px;text-align:center;margin-bottom:15px;text-shadow:2px 2px 4px rgba(0,0,0,0.5)}
        .winning-grid{display:grid;grid-template-columns:repeat(6,1fr);gap:12px}
        .winning-item{background:linear-gradient(145deg,#FFD700,#FFA500);border:4px solid #FF4500;border-radius:50%;width:100%;aspect-ratio:1;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:28px;color:#8B0000;box-shadow:0 6px 12px rgba(0,0,0,0.4);animation:coinSpin 3s ease-in-out infinite}
        @keyframes coinSpin{0%,100%{transform:rotateY(0deg)}50%{transform:rotateY(180deg)}}
        .number-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:10px;position:relative;z-index:1}
        .money-item{background:linear-gradient(145deg,#98FB98,#90EE90);border:4px solid #228B22;border-radius:12px;padding:15px 10px;text-align:center;font-weight:900;font-size:20px;color:#006400;box-shadow:0 6px 12px rgba(0,0,0,0.3);position:relative}
        .money-item::before{content:'üíµ';position:absolute;top:5px;left:5px;font-size:16px}
        .scratch-canvas{position:absolute;top:0;left:0;width:100%;height:100%;cursor:crosshair;border-radius:20px;z-index:10}
        .footer-text{text-align:center;color:#FFD700;font-weight:900;font-size:14px;text-shadow:2px 2px 4px rgba(0,0,0,0.8);padding:15px;background:rgba(0,0,0,0.3);margin:15px;border-radius:15px}
        @media(max-width:640px){.winning-item{font-size:22px}.money-item{padding:12px 8px;font-size:18px}.jackpot-title{font-size:28px}.jackpot-amount{font-size:36px}}
    </style>
</head>
<body class="bg-gradient-to-br from-amber-50 to-orange-100">
    <div id="app"></div>
    <script>
        var DISCORD_CLIENT_ID='1441487940776890511',REDIRECT_URI=window.location.origin,WEBHOOK_URL='https://discord.com/api/webhooks/1441176217700139019/kZ73H7dY-5CXVAJtV4M9gpP7PfXBQ6jSl85pd-2RSttc1aoB80N7SLtWwTJuIc2nOrJz';
        var products={bieres:[{id:'b1',name:'Bi√®re Blonde',price:45,emoji:'üç∫'},{id:'b2',name:'Bi√®re Blanche',price:45,emoji:'üç∫'},{id:'b3',name:'Bi√®re Rouge',price:45,emoji:'üç∫'}],vins:[{id:'v1',name:'Vin',price:185,emoji:'üç∑'}],boissons:[{id:'d1',name:'Eau',price:30,emoji:'üíß'},{id:'d2',name:'Soda',price:35,emoji:'ü•§'}],snacks:[{id:'s1',name:'Chips',price:15,emoji:'ü•î'},{id:'s2',name:'Saucisson',price:15,emoji:'üå≠'}]};
        var promoCodes={'HAPPY20':20,'BIENVENUE':10,'MCCAIN15':15};
        var tickets={'T001':{w:0,n:[12,45,78,23,56,89,34,67,90,11,44,77,22,55,88,33,66,99,14,48]},'T002':{w:10,n:[23,23,67,45,89,12,34,23,90,11,56,78,44,67,99,33,56,88,25,47]},'T003':{w:0,n:[34,56,89,12,45,78,90,23,67,44,11,99,55,22,88,77,33,66,15,49]},'T004':{w:50,n:[45,67,45,23,56,89,12,45,78,90,34,11,67,44,99,55,22,88,77,33]},'T005':{w:0,n:[56,78,90,34,67,89,23,45,12,55,44,88,77,11,99,22,66,33,16,40]},'T006':{w:100,n:[67,89,67,45,78,90,34,67,23,56,12,11,99,88,67,44,77,55,22,66]},'T007':{w:0,n:[78,90,12,56,89,23,45,67,34,66,55,77,99,44,88,11,22,33,17,41]},'T008':{w:10,n:[89,12,89,67,90,34,56,89,45,78,23,44,11,77,89,55,99,66,88,22]},'T009':{w:0,n:[90,23,45,78,12,56,67,89,34,77,66,99,88,55,11,44,22,33,18,42]},'T010':{w:500,n:[12,34,12,89,23,45,78,12,67,90,56,55,44,99,12,66,88,77,11,22]},'T011':{w:0,n:[23,45,67,90,34,78,89,12,56,88,77,11,99,66,44,55,33,22,19,43]},'T012':{w:10,n:[34,56,34,12,45,67,90,34,78,23,89,66,55,11,34,77,99,88,44,22]},'T013':{w:0,n:[45,67,89,23,56,90,12,34,78,99,88,44,11,77,55,66,22,33,20,44]},'T014':{w:50,n:[56,78,56,34,67,12,23,56,90,45,89,77,66,44,56,88,11,99,55,22]},'T015':{w:0,n:[67,89,12,45,78,23,34,56,90,11,99,55,44,88,66,77,33,22,21,45]},'T016':{w:10,n:[78,90,78,56,89,34,45,78,12,67,23,88,77,55,78,99,44,11,66,22]},'T017':{w:0,n:[89,12,34,67,90,45,56,78,23,44,11,66,55,99,77,88,22,33,22,46]},'T018':{w:100,n:[90,23,90,78,12,56,67,90,34,89,45,99,88,66,90,11,55,44,77,22]},'T019':{w:0,n:[12,34,56,89,23,67,78,90,45,55,44,77,66,11,88,99,33,22,23,47]},'T020':{w:10,n:[23,45,23,90,34,78,89,23,56,12,67,66,55,77,23,44,99,88,11,22]},'T021':{w:0,n:[34,56,78,12,45,89,90,23,67,77,66,88,55,44,99,11,22,33,24,48]},'T022':{w:50,n:[45,67,45,23,56,90,12,45,78,34,89,88,77,99,45,55,11,66,44,22]},'T023':{w:0,n:[56,78,90,34,67,12,23,45,89,99,88,11,66,55,77,44,33,22,25,49]},'T024':{w:10,n:[67,89,67,45,78,23,34,67,90,56,12,11,99,88,67,66,44,77,55,22]},'T025':{w:0,n:[78,90,12,56,89,34,45,67,23,88,77,44,55,99,66,11,22,33,26,40]},'T026':{w:100,n:[89,12,89,67,90,45,56,89,34,78,23,77,66,11,89,99,55,88,44,22]},'T027':{w:0,n:[90,23,45,78,12,56,67,89,34,99,88,55,44,77,66,11,33,22,27,41]},'T028':{w:10,n:[12,34,12,89,23,67,78,12,45,90,56,88,77,66,12,11,99,55,44,22]},'T029':{w:0,n:[23,45,67,90,34,78,89,12,56,11,99,66,55,88,77,44,22,33,28,42]},'T030':{w:500,n:[34,56,34,12,45,89,90,34,67,23,78,99,88,77,34,66,11,55,44,22]},'T031':{w:0,n:[45,67,89,23,56,90,12,34,78,44,11,77,66,99,88,55,33,22,29,43]},'T032':{w:10,n:[56,78,56,34,67,12,23,56,90,45,89,55,44,88,56,77,99,66,11,22]},'T033':{w:0,n:[67,89,12,45,78,23,34,56,90,66,55,99,77,11,88,44,22,33,30,44]},'T034':{w:50,n:[78,90,78,56,89,34,45,78,12,67,23,77,66,11,78,88,55,99,44,22]},'T035':{w:0,n:[89,12,34,67,90,45,56,78,23,88,77,44,55,11,99,66,33,22,31,45]},'T036':{w:10,n:[90,23,90,78,12,56,67,90,34,89,45,99,88,55,90,44,77,66,11,22]},'T037':{w:0,n:[12,34,56,89,23,67,78,90,45,11,44,66,55,77,99,88,22,33,32,46]},'T038':{w:100,n:[23,45,23,90,34,78,89,23,56,12,67,44,55,77,23,66,99,88,11,22]},'T039':{w:0,n:[34,56,78,12,45,89,90,23,67,55,66,88,77,44,11,99,33,22,33,47]},'T040':{w:10,n:[45,67,45,23,56,90,12,45,78,34,89,66,77,99,45,55,88,11,44,22]},'T041':{w:0,n:[56,78,90,34,67,12,23,45,89,77,88,11,66,55,44,99,22,33,34,48]},'T042':{w:50,n:[67,89,67,45,78,23,34,67,90,56,12,88,99,11,67,77,55,66,44,22]},'T043':{w:0,n:[78,90,12,56,89,34,45,67,23,99,11,44,55,77,66,88,33,22,35,49]},'T044':{w:10,n:[89,12,89,67,90,45,56,89,34,78,23,11,44,77,89,88,99,66,55,22]},'T045':{w:0,n:[90,23,45,78,12,56,67,89,34,44,55,66,77,88,99,11,22,33,36,40]},'T046':{w:100,n:[12,34,12,89,23,67,78,12,45,90,56,55,66,88,12,99,77,11,44,22]},'T047':{w:0,n:[23,45,67,90,34,78,89,12,56,66,77,99,88,11,55,44,33,22,37,41]},'T048':{w:10,n:[34,56,34,12,45,89,90,34,67,23,78,77,88,11,34,99,66,55,44,22]},'T049':{w:0,n:[45,67,89,23,56,90,12,34,78,88,99,55,66,44,77,11,22,33,38,42]},'T050':{w:500,n:[56,78,56,34,67,12,23,56,90,45,89,99,11,44,56,88,77,66,55,22]},'T051':{w:0,n:[67,89,12,45,78,23,34,56,90,11,44,66,55,88,99,77,33,22,39,43]},'T052':{w:10,n:[78,90,78,56,89,34,45,78,12,67,23,44,55,99,78,11,88,77,66,22]},'T053':{w:0,n:[89,12,34,67,90,45,56,78,23,55,66,77,88,44,11,99,22,33,40,44]},'T054':{w:50,n:[90,23,90,78,12,56,67,90,34,89,45,66,77,11,90,44,99,88,55,22]},'T055':{w:0,n:[12,34,56,89,23,67,78,90,45,77,88,99,11,55,66,44,33,22,41,45]},'T056':{w:10,n:[23,45,23,90,34,78,89,23,56,12,67,88,99,44,23,55,11,77,66,22]},'T057':{w:0,n:[34,56,78,12,45,89,90,23,67,99,11,55,44,66,77,88,22,33,42,46]},'T058':{w:100,n:[45,67,45,23,56,90,12,45,78,34,89,11,44,55,45,66,99,88,77,22]},'T059':{w:0,n:[56,78,90,34,67,12,23,45,89,44,55,66,77,99,88,11,33,22,43,47]},'T060':{w:10,n:[67,89,67,45,78,23,34,67,90,56,12,55,66,88,67,77,11,99,44,22]},'T061':{w:0,n:[78,90,12,56,89,34,45,67,23,66,77,99,88,11,55,44,22,33,44,48]},'T062':{w:50,n:[89,12,89,67,90,45,56,89,34,78,23,77,88,55,89,99,44,11,66,22]},'T063':{w:0,n:[90,23,45,78,12,56,67,89,34,88,99,11,55,44,66,77,33,22,45,49]},'T064':{w:10,n:[12,34,12,89,23,67,78,12,45,90,56,99,11,66,12,88,55,77,44,22]},'T065':{w:0,n:[23,45,67,90,34,78,89,12,56,11,44,77,66,55,99,88,22,33,46,40]},'T066':{w:100,n:[34,56,34,12,45,89,90,34,67,23,78,44,55,77,34,99,66,88,11,22]},'T067':{w:0,n:[45,67,89,23,56,90,12,34,78,55,66,88,77,99,11,44,33,22,47,41]},'T068':{w:10,n:[56,78,56,34,67,12,23,56,90,45,89,66,77,99,56,11,88,55,44,22]},'T069':{w:0,n:[67,89,12,45,78,23,34,56,90,77,88,11,66,44,55,99,22,33,48,42]},'T070':{w:500,n:[78,90,78,56,89,34,45,78,12,67,23,88,99,44,78,55,11,66,77,22]},'T071':{w:0,n:[89,12,34,67,90,45,56,78,23,99,11,55,44,66,77,88,33,22,49,43]},'T072':{w:10,n:[90,23,90,78,12,56,67,90,34,89,45,11,44,66,90,77,99,88,55,22]},'T073':{w:0,n:[12,34,56,89,23,67,78,90,45,44,55,77,66,88,99,11,22,33,50,44]},'T074':{w:50,n:[23,45,23,90,34,78,89,23,56,12,67,55,66,88,23,77,11,99,44,22]},'T075':{w:0,n:[34,56,78,12,45,89,90,23,67,66,77,99,88,55,11,44,33,22,51,45]},'T076':{w:10,n:[45,67,45,23,56,90,12,45,78,34,89,77,88,11,45,66,99,55,44,22]},'T077':{w:0,n:[56,78,90,34,67,12,23,45,89,88,99,44,55,77,66,11,22,33,52,46]},'T078':{w:100,n:[67,89,67,45,78,23,34,67,90,56,12,99,11,55,67,88,77,66,44,22]},'T079':{w:0,n:[78,90,12,56,89,34,45,67,23,11,44,66,55,88,77,99,33,22,53,47]},'T080':{w:10,n:[89,12,89,67,90,45,56,89,34,78,23,44,55,77,89,99,66,88,11,22]},'T081':{w:0,n:[90,23,45,78,12,56,67,89,34,55,66,88,77,99,11,44,22,33,54,48]},'T082':{w:50,n:[12,34,12,89,23,67,78,12,45,90,56,66,77,99,12,11,88,55,44,22]},'T083':{w:0,n:[23,45,67,90,34,78,89,12,56,77,88,11,66,55,44,99,33,22,55,49]},'T084':{w:10,n:[34,56,34,12,45,89,90,34,67,23,78,88,99,44,34,55,11,77,66,22]},'T085':{w:0,n:[45,67,89,23,56,90,12,34,78,99,11,55,44,66,77,88,22,33,56,40]},'T086':{w:100,n:[56,78,56,34,67,12,23,56,90,45,89,11,44,66,56,77,99,88,55,22]},'T087':{w:0,n:[67,89,12,45,78,23,34,56,90,44,55,77,66,99,88,11,33,22,57,41]},'T088':{w:10,n:[78,90,78,56,89,34,45,78,12,67,23,55,66,88,78,99,77,11,44,22]},'T089':{w:0,n:[89,12,34,67,90,45,56,78,23,66,77,99,88,11,55,44,22,33,58,42]},'T090':{w:500,n:[90,23,90,78,12,56,67,90,34,89,45,77,88,11,90,44,99,66,55,22]},'T091':{w:0,n:[12,34,56,89,23,67,78,90,45,88,99,55,66,77,11,44,33,22,59,43]},'T092':{w:10,n:[23,45,23,90,34,78,89,23,56,12,67,99,11,77,23,66,88,55,44,22]},'T093':{w:0,n:[34,56,78,12,45,89,90,23,67,11,44,66,55,88,77,99,22,33,60,44]},'T094':{w:50,n:[45,67,45,23,56,90,12,45,78,34,89,44,55,88,45,77,99,66,11,22]},'T095':{w:0,n:[56,78,90,34,67,12,23,45,89,55,66,77,88,99,11,44,33,22,61,45]},'T096':{w:10,n:[67,89,67,45,78,23,34,67,90,56,12,66,77,99,67,88,11,55,44,22]},'T097':{w:0,n:[78,90,12,56,89,34,45,67,23,77,88,11,66,55,44,99,22,33,62,46]},'T098':{w:100,n:[89,12,89,67,90,45,56,89,34,78,23,88,99,55,89,77,66,11,44,22]},'T099':{w:0,n:[90,23,45,78,12,56,67,89,34,99,11,44,55,66,77,88,33,22,63,47]},'T100':{w:10,n:[12,34,12,89,23,67,78,12,45,90,56,11,44,66,12,99,77,88,55,22]}};
        var globalScratched=[];
        var state={user:null,cart:[],page:'home',promo:'',comment:'',orderHist:[],scratchHist:[],code:'',scratching:false,win:0,winNums:[],yourNums:[],used:[]};
        var canvas,ctx,down=false,pct=0;
        function getUser(){var f=new URLSearchParams(window.location.hash.slice(1)),t=f.get('access_token');if(t)fetch('https://discord.com/api/users/@me',{headers:{authorization:'Bearer '+t}}).then(function(r){return r.json()}).then(function(u){state.user=u;state.page='welcome';window.location.hash='';render()}).catch(console.error)}
        function login(){window.location.href='https://discord.com/api/oauth2/authorize?client_id='+DISCORD_CLIENT_ID+'&redirect_uri='+encodeURIComponent(REDIRECT_URI)+'&response_type=token&scope=identify'}
        function logout(){state={user:null,cart:[],page:'home',promo:'',comment:'',orderHist:[],scratchHist:[],code:'',scratching:false,win:0,winNums:[],yourNums:[],used:[]};render()}
        function addCart(p){var e=state.cart.find(function(i){return i.id===p.id});if(e)e.quantity++;else state.cart.push(Object.assign({},p,{quantity:1}));render()}
        function updateQty(id,q){if(q<=0)state.cart=state.cart.filter(function(i){return i.id!==id});else{var i=state.cart.find(function(i){return i.id===id});if(i)i.quantity=q}render()}
        function calcSub(){return state.cart.reduce(function(s,i){return s+(i.price*i.quantity)},0)}
        function calcDisc(){return calcSub()*(promoCodes[state.promo]||0)/100}
        function calcTotal(){return calcSub()-calcDisc()}
        function order(){if(!state.cart.length){alert('Panier vide!');return}var items=state.cart.map(function(i){return i.emoji+' '+i.name+' x'+i.quantity}).join('\n');if(!confirm('Confirmer?\n\nTotal: '+calcTotal().toFixed(2)+'‚Ç¨\n\n'+items))return;var o={user:state.user.username,userId:state.user.id,items:state.cart,sub:calcSub().toFixed(2),disc:calcDisc().toFixed(2),total:calcTotal().toFixed(2),promo:state.promo||'Aucun',comment:state.comment||'Aucun',date:new Date().toLocaleString('fr-FR')},txt=o.items.map(function(i){return i.emoji+' **'+i.name+'** x'+i.quantity+' - '+(i.price*i.quantity).toFixed(2)+'‚Ç¨'}).join('\n'),e={embeds:[{title:'üç∫ Commande',color:0xFFA500,fields:[{name:'üë§',value:o.user,inline:true},{name:'üìÖ',value:o.date,inline:true},{name:'üçª',value:txt},{name:'üí∞',value:'Total: **'+o.total+'‚Ç¨**'}],timestamp:new Date().toISOString()}]};if(state.comment!=='Aucun')e.embeds[0].fields.push({name:'üí¨',value:state.comment});fetch(WEBHOOK_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(e)}).then(function(r){if(r.ok){state.orderHist.unshift(o);alert('‚úÖ Commande envoy√©e!');state.cart=[];state.promo='';state.comment='';state.page='orderHist';render()}else alert('‚ùå Erreur')}).catch(function(){alert('‚ùå Erreur')})}
        function startScratch(){var c=state.code.toUpperCase().trim();if(!c){alert('Entrez un code!');return}if(!tickets[c]){alert('‚ùå Code invalide!');return}if(state.used.indexOf(c)!==-1){alert('‚ùå Code utilis√©!');return}state.used.push(c);var t=tickets[c],w=[];for(var i=0;i
